Use Case Document (Final)
Use Case 1: Investor (News Analysis)
Actor: Investor
Goal: To obtain an investment analysis report with recommended actions based on a desired company, leveraging LLM-driven news sentiment analysis.
Description: The Investor uses the Quant Analysis Platform to generate an investment analysis report for a specific company. The news sentiment analysis module, integrated via backend/services/llm_service.py (specifically analyze_news_sentiment_gemini) and exposed through backend/routes/llm_routes.py, is guided by step-by-step instructions and best practices generated by LLM prompts. This ensures the module effectively analyzes relevant financial news (fetched via external APIs, confirmed by requests in backend/services/data_service.py) and financial data from yfinance (as outlined in backend/services/data_service.py and confirmed in backend/api.py). The prompts used to guide this sentiment analysis within the application are managed through the prompts table via backend/database.py and refined by financial analysts.
Main User Story: As an Investor, I want to generate an investment analysis report for a specific company by entering its name or code, so that I can make informed investment decisions based on LLM-analyzed news sentiment.
Related User Stories:
As an Investor, I want to generate an investment analysis report for a company listed on a major stock exchange, so that I can obtain reliable news and financial data for LLM sentiment analysis (the development of the data retrieval process was guided by LLM prompts and uses yfinance as seen in backend/api.py and backend/services/data_service.py).
As an Investor, I want to receive a notification that the company I entered is not listed on a major stock exchange and an analysis report cannot be generated, so that I understand the platform's limitations for LLM sentiment analysis (the logic for this validation was developed following LLM-generated guidance).
As an Investor, I want to be able to download the report in PDF or Word format (report generation handled by report_service.py - not provided in snippets, with the formatting potentially influenced by LLM-suggested best practices).
As an investor, I want to be able to submit feedback regarding faults in the generated report (feedback stored in the feedback table via feedback_service.py - not provided in snippets, the design of this feedback mechanism was informed by LLM suggestions).
Basic Flow (Main Success Scenario):
The Investor logs into the Quant Analysis Platform.
The Investor enters the desired company's name or code into the search input (the UI design for this input might have been informed by LLM UX suggestions).
The Investor initiates the analysis request.
The Platform validates the company identifier (the validation logic was developed following LLM guidance).
The Platform utilizes backend/services/llm_service.py (developed based on LLM step-by-step instructions and accessed via backend/routes/llm_routes.py) to:
Gather relevant financial news (potentially using external APIs, the integration process guided by LLM prompts, confirmed by Workspace_latest_news in backend/services/data_service.py).
Retrieve an appropriate prompt from the prompts table (PromptVersion in backend/database.py) designed for news sentiment analysis.
Send the news content to the LLM API using the retrieved prompt (analyze_news_sentiment_gemini in backend/services/llm_service.py).
Receive and parse the sentiment analysis results from the LLM (the parsing logic developed with LLM assistance).
Incorporate the sentiment analysis into the investment analysis report (generated by report_service.py - not provided in snippets, the structure potentially guided by LLM suggestions; report data is constructed in backend/routes/llm_routes.py).
The Platform generates a downloadable document (PDF/Word) containing the analysis report.
The Investor downloads and reviews the document, paying attention to the LLM-driven sentiment analysis.
The Investor makes investment decisions based on the analysis.
The investor can submit feedback for the report (stored via feedback_service.py - not provided in snippets).
Alternative Flows (Error Scenarios):
Invalid company name or code entered.
No data found for the specified company.
LLM fails to generate the analysis report due to errors (e.g., API issues).
Network connection issues during data retrieval.
Investor's login credentials are invalid.
Investor's account does not have the permissions to generate reports.
Failure to download report.
Failure to submit feedback.
Preconditions:
The Investor has an active account on the Quant Analysis Platform (user authentication developed with security best practices suggested by LLMs).
The Platform has a working integration with the LLM API (backend/services/llm_service.py is configured and authenticated, following LLM integration best practices).
Relevant prompts for news sentiment analysis are available in the prompts table (PromptVersion in backend/database.py) (these prompts themselves were likely developed and refined based on LLM suggestions for effective sentiment analysis).
The Platform has access to financial news data (via external APIs, confirmed by requests in backend/services/data_service.py, the selection and integration of which might have been informed by LLM recommendations) and financial data from sources like yfinance (confirmed in backend/api.py, backend/services/data_service.py).
The Platform has a stable network connection (network handling developed based on standard practices, potentially reviewed by LLMs for robustness).
Postconditions:
An investment analysis report incorporating LLM-driven news sentiment analysis is generated and available for download (PDF/Word).
The Investor has the analysis document for decision-making.
The Platform logs the analysis request, user activity, and report feedback in the respective tables.
If feedback is provided, the platform stores the report, prompts, and related data for financial analyst review (as per Use Case 5, the workflow designed with LLM-suggested best practices).
Use Case 2: Investor (Data Visualisation)
Actor: Investor
Goal: Track the performance of a specific company based on its name or code, using key financial indicators and visual graphs generated based on LLM-analyzed trends, and receive daily news updates.
Description: The Investor utilizes the Quant Analysis Platform to monitor the performance of a chosen company. The platform provides real-time or near real-time data and visualizations of essential financial metrics. The development of visualization_service.py (implied by backend/routes/graph_routes.py fetching graph data) to generate these graphs, supported by backend/routes/graph_routes.py and backend/services/data_service.py, is being guided by LLM prompts suggesting effective visualization techniques and identification of key trends. The prompts used to guide the LLM in identifying these trends within the application might be managed by financial analysts. Daily news updates are also provided (the integration of the news feed, handled by scheduled tasks in backend/tasks.py which are scheduled in backend/app.py, might have been guided by LLM suggestions for efficient data handling).
User Story (Main): As an Investor, I want to track the performance of a specific company using key financial metrics, visual graphs informed by LLM-analyzed trends, and daily news updates at 9 AM Singapore Time, so that I can make informed investment decisions based on the most current information.
Other Related User Story: (No significant changes based on current implementation details, but the development of these features might have been guided by LLM prompts).
Basic Flow (Main Success Scenario):
The Investor logs into the Quant Analysis Platform.
The Investor selects the "Track Company Performance" option (UI design potentially LLM-informed).
The Investor enters the company's name or code into the search input.
The Platform validates the company identifier.
The Platform retrieves and displays:
Financial Metrics (from the financial_data table, retrieved via backend/services/data_service.py and backend/routes/data_routes.py, the retrieval logic potentially guided by LLM efficiency suggestions).
Visual Graphs (generated by visualization_service.py - implied, and served via backend/routes/graph_routes.py, which fetches close and volume data for weekly, monthly, yearly, or max timeframes). The insights for what trends to highlight in these graphs might be informed by LLM analysis driven by prompts from financial analysts.
Daily News Updates (potentially including sentiment analyzed by the LLM, the integration of which was LLM-guided and handled by backend/tasks.py for daily_news_update).
The Investor reviews the data and graphs.
The Investor can set alerts for specific metric thresholds (email, mobile - managed by alerting_service.py and the alerts table; Alert model confirmed in backend/database.py, alert_routes_bp registered in backend/app.py, the design of the alerting system potentially LLM-informed).
The investor can download the data as a CSV file (via download_service.py - core logic not provided, download_routes_bp registered in backend/app.py, the implementation of the download functionality potentially guided by LLM best practices).
Alternative Flows (Error Scenarios):
Invalid company name or code entered.
No data found for the specified company.
Data retrieval errors.
Network connection issues.
Alert setup errors.
News update retrieval errors.
News update delay past 9AM SG Time.
Failure to download CSV data.
Preconditions:
The Investor has an active account.
The Platform has access to financial data (financial_data table, database design potentially LLM-reviewed, confirmed by FinancialData model in backend/database.py).
The platform has access to news data (via external APIs, integration guided by LLM suggestions, confirmed by backend/services/data_service.py).
The visualization_service.py (supported by backend/routes/graph_routes.py) is functional, and its insights are potentially guided by LLM analysis based on prompts. The development of this service followed LLM-generated steps.
The platform has a scheduled task (backend/tasks.py for daily_news_update) that runs at 9 AM SG time for news updates (scheduling logic potentially LLM-informed, configured in backend/app.py).
Postconditions:
Company performance data, LLM-trend-informed graphs (fetching close and volume data by timeframe), and news updates are displayed.
Alerts are set (if applicable).
The news data is updated daily at 9 AM SG time.
Data is downloaded as CSV if requested.
Use Case 3: System Administrator (Access Control and Authorisation)
Actor: System Administrator
Goal: Manage user accounts and regulate access control and enforce strong security measures including two-factor authentication.
Description: The System Administrator manages user accounts (stored in the users table, the schema design potentially reviewed by LLMs for security and efficiency, User model confirmed in backend/database.py), defines access permissions (associated with user roles in the users table, the role-based access control implementation guided by LLM security best practices), and enforces security protocols, including 2FA (the implementation of which followed LLM-suggested secure methods), to ensure system security, integrity, and compliance. While not directly driving the application's core features, LLM prompts might have guided the development team on secure implementation strategies for user management.
User Story (Main): As a System Administrator, I want to manage user accounts and control access permissions, including enforcing two-factor authentication, so that I can ensure the security and integrity of the platform (the development of these features was guided by LLM security recommendations).
Other Related User Story:
As a System Administrator, I want to enforce a password complexity policy for all user accounts.
As a System Administrator, I want to lock user accounts after a specified number of failed login attempts.
As a System Administrator, I want to receive an alert when a user attempts to access a restricted resource.
As a System Administrator, I want to be able to deactivate an account, instead of fully deleting it, for auditing purposes.
As a System Administrator, I want to be able to enable or disable 2FA for users.
As a System Administrator, I want to be able to configure the 2FA methods available (SMS, email, authenticator app).
As a System Administrator, I want to be able to view 2FA enrollment status of users.
Basic Flow (Main Success Scenario):
The System Administrator logs into the admin panel (using their own 2FA).
The System Administrator selects the "User Management" option.
The System Administrator can:
Create a new user account (with optional 2FA enrollment).
Modify an existing user account (e.g., change password, update profile, enable/disable 2FA, change 2FA method).
Delete a user account.
Deactivate a user account.
Assign or modify user roles and permissions.
View 2FA enrollment status.
The Platform validates the action and updates the user database, including 2FA settings.
The Platform displays confirmation.
The System Administrator can review user access logs, including 2FA login attempts.
The System Administrator can configure 2FA methods (SMS, email, authenticator app).
Alternative Flows (Error Scenarios):
Invalid input (e.g., weak password, duplicate username).
Database errors.
Insufficient permissions.
Invalid role assignment.
Log access errors.
2FA configuration errors (e.g., invalid phone number, email).
2FA enrollment failure.
2FA validation failure.
Preconditions:
The System Administrator has admin credentials and has successfully passed 2FA.
The Platform is online.
The Platform has the 2FA services configured.
Postconditions:
User accounts are created, modified, or deleted.
User roles and permissions are updated.
User access logs are accessible.
2FA settings are configured and applied.
Users can be enrolled in 2FA.2


Security Considerations:
Two-Factor Authentication (2FA):
Support for multiple 2FA methods (SMS, email, authenticator app).
Ability to enforce 2FA for all users or specific roles.
Detailed logging of 2FA enrollment and login attempts.
Ability to recover 2FA access in case of device loss.
Password Policies:
Enforce strong password complexity.
Regular password expiration.
Account Lockout:
Lock accounts after a specified number of failed login attempts.
Least Privilege:
Assign only necessary permissions to users.
Audit Logging:
Maintain detailed logs of all user actions.
Data Encryption:
Encrypt sensitive data at rest and in transit.

Use Case 4: Financial Analyst (LLM Prompt Entry)
Actor: Financial Analyst
Goal: Refines prompts used by the LLM for news sentiment and potentially graph analysis, with version control (using the prompts table) to improve analysis accuracy and the quality of insights derived. The development of the prompt management interface was guided by LLM suggestions for usability.
Description: The Financial Analyst refines the prompts used by the LLM (managed via backend/services/llm_service.py and stored in the prompts table with versioning as seen in backend/database.py) to improve the accuracy and reliability of news sentiment analysis (for Use Case 1) and potentially the insights driving data visualization (for Use Case 2). The platform utilizes version control for prompt management (the implementation of which was guided by LLM best practices for version control systems), allowing analysts to track and revert to previous versions. A/B testing is a planned feature (the design of the A/B testing framework might be informed by LLM suggestions).
User Story: As a Financial Analyst, I want to refine LLM prompts with version control so that I can improve the accuracy and reliability of LLM-driven news sentiment analysis and the quality of insights for data visualization (the development of this functionality was guided by LLM prompts for effective prompt engineering workflows).
Basic Flow:
Financial Analyst logs into the analyst portal (UI design potentially LLM-informed).
Financial Analyst selects the LLM prompt management option (UI and backend logic developed with LLM guidance).
Financial Analyst can:
Modify existing prompts or create new ones (these will be stored as new versions in the prompts table via functions like create_prompt_version and update_prompt_version_text in backend/database.py, the development of these functions guided by LLM best practices). Analysts will focus on prompts related to news sentiment and potentially trend identification for graphs (the initial set of prompts might have been generated based on LLM suggestions for effective analysis).


Utilize version control:
View history of prompt changes (by querying the prompts table for a specific prompt_name using get_prompt_versions_by_prompt_id in backend/database.py, the query logic potentially optimized based on LLM advice).
Revert to previous versions (by selecting an older version from the prompts table and potentially setting its operative status to TRUE while setting the current version to FALSE, supported by functions like set_operative_prompt_version in backend/database.py, the update logic developed with LLM guidance).
Platform validates and stores the updated prompts (as new versions in the prompts table, the validation logic potentially LLM-informed).
Financial Analyst tests the prompts by triggering report generation (Use Case 1) or viewing company performance (Use Case 2) with the modified prompts and reviews the output, specifically focusing on the LLM-driven sentiment and any trends highlighted in the graphs (the testing process might follow a methodology suggested by LLMs for evaluating LLM output).
Financial Analyst selects the best performing prompt (by making it the active version, the logic for this update developed with LLM guidance).
Alternative Flows:
Invalid prompt syntax.
Testing failures.
A/B test setup errors (e.g., invalid parameters).
Insufficient data for A/B testing.
Version control conflicts.
Version reversion failure.
Preconditions:
Financial Analyst has analyst credentials (user roles and permissions managed as per Use Case 3, potentially LLM-informed).
Platform is online (deployment and infrastructure setup might have followed LLM best practices).
LLM is integrated with the platform (backend/services/llm_service.py is functional, developed with LLM guidance).
Existing prompts for news sentiment and graph analysis are available in the prompts table (PromptVersion in backend/database.py) (initial prompts potentially LLM-generated).
Postconditions:
LLM prompts for news sentiment and graph analysis are updated and versioned in the prompts table.
Improved accuracy of LLM-driven sentiment analysis and quality of visualization insights through analyst refinement (guided by the LLM's initial capabilities and suggestions).
Version Control:
Example: When modifying a prompt, the system automatically saves a new version with a timestamp and the analyst's name.
Detail: The system maintains a history of all prompt changes, allowing analysts to view differences between versions, compare performance, and revert to previous versions if needed.
Branching: The system provides the ability to create branches of a prompt, so that the analyst can work on an experimental prompt, without altering the production prompt.
Reverting: The system allows the analyst to easily revert to a previous version of a prompt.
A/B Testing:
Example: An analyst wants to test two variations of a prompt that analyzes company earnings reports. Variation A is more concise, while Variation B includes more specific keywords.
Detail: The analyst sets up an A/B test with a defined sample size of earnings reports and specifies metrics such as accuracy of key financial figure extraction and sentiment analysis.
Metrics: The system tracks and displays metrics such as accuracy, relevance, and response time for each prompt variation.
Statistical Significance: The system provides tools to assess the statistical significance of A/B test results.
Reporting: The system provides a report that details the results of the A/B test, including the performance of each variation.
Implementation: The system allows for the percentage of total requests that are sent to each prompt to be adjusted.
Use Case 5: Financial Analyst (Review List of Generated Reports from Users for Improvement on LLM Prompts and Formation of Reports)
Actor: Financial Analyst
Goal: Review generated reports to ensure accuracy and relevance, and analyze the prompt used for generation (related to LLM sentiment or graph analysis) to identify areas for improvement on LLM prompts and report formation. The workflow for this review process might have been designed based on LLM suggestions for effective feedback loops.
Description: The Financial Analyst reviews generated reports (stored in the reports table via report_service.py - not provided in snippets and generated via backend/routes/llm_routes.py) and the associated LLM prompts (specifically those used for news sentiment analysis or to guide graph insights from the prompts table in backend/database.py) to ensure accuracy, compliance, and optimize prompt performance and report structure. User feedback (stored in the feedback table via feedback_service.py - not provided in snippets, the collection of which might have been informed by LLM UX best practices) can also be reviewed in conjunction with the reports and prompts.
User Story: As a Financial Analyst, I want to review generated reports and the associated LLM prompts and user feedback so that I can ensure accuracy, compliance, and optimize prompt performance and report structure, particularly focusing on the LLM's contributions (sentiment and graph insights), with the review process itself potentially guided by LLM-suggested best practices for feedback analysis.
Basic Flow:
Financial Analyst accesses the report review queue.
Financial Analyst selects a report to review.
Financial Analyst analyzes the report content and the associated LLM prompt used for generation.
Financial Analyst provides feedback on the report and suggests improvements to the prompt.
Financial analyst approves the report or requests revisions.
Alternative Flows:
Report access errors.
Feedback submission failures.
Prompt data retrieval failure.
Preconditions:
Financial Analysts have access to the report review queue (based on their role and permissions, managed as per Use Case 3).
Reports are generated and stored in the reports table (Report model confirmed in backend/database.py).
User feedback is captured and stored in the feedback table, linked to the relevant reports (Feedback model confirmed in backend/database.py, the data model and relationships potentially reviewed by LLMs for integrity).
There is a mechanism to identify or trace the LLM prompt used to generate a specific report (the implementation of this tracing might have been guided by LLM suggestions for logging and auditing).
Postconditions:
Reports are reviewed and approved or feedback is provided.
Insights from report reviews and user feedback are used to refine LLM prompts (via Use Case 4) and potentially improve the report generation process in report_service.py (the process of using feedback to improve the system might follow an iterative development cycle suggested by LLMs).
Use Case 6: Data Analyst/Researcher (Access and Download Market Data)
Actor: Data Analyst/Researcher
Goal: To access and download raw market data for analysis and research purposes.
Description: The Data Analyst/Researcher uses the platform to access and download historical and real-time market data in various formats for further analysis and modeling. The development of the data access and download features (via backend/services/data_service.py and download_service.py - core logic not provided, but download_routes_bp registered in backend/app.py, exposed through backend/api.py and backend/routes/data_routes.py) was guided by LLM prompts suggesting efficient data retrieval strategies and common data formats.
Main User Story: As a Data Analyst/Researcher, I want to access and download market data in various formats so that I can conduct in-depth analysis and build financial models (the implementation of this feature followed LLM-generated steps).
Related User Stories:
As a Data Analyst/Researcher, I want to be able to filter data by date range and specific financial metrics so that I can download only the data I need (the filtering and query logic was potentially optimized based on LLM advice and implemented in backend/routes/data_routes.py, which supports fetching data by period and filtering by company_id).
As a Data Analyst/Researcher, I want to download data in CSV, Excel, or JSON format so that I can use it with various analytical tools (the implementation of different export formats was likely guided by LLM suggestions for compatibility; CSV download is mentioned in Use Case 2).
As a Data Analyst/Researcher, I want to receive clear feedback on the status of my download request (the user feedback mechanism was potentially designed based on LLM UX principles).
Basic Flow (Main Success Scenario):
The Data Analyst/Researcher logs into the platform.
The Data Analyst/Researcher navigates to the data download section (UI design potentially LLM-informed).
The Data Analyst/Researcher selects the company and the desired data range.
The Data Analyst/Researcher selects the specific financial metrics to download.
The Data Analyst/Researcher chooses the preferred download format (CSV, Excel, JSON).
The Platform retrieves the requested data (using backend/services/data_service.py, the retrieval process guided by LLM efficiency suggestions).
The Platform formats the data according to the selected format (using download_service.py - core logic not provided, the formatting logic potentially LLM-assisted).
The Platform provides a download link to the Data Analyst/Researcher.
Alternative Flows (Error Scenarios):
Data retrieval errors.
Data formatting errors.
Download errors.
Insufficient permissions.
Preconditions:
The Data Analyst/Researcher has an active account.
The platform has access to the financial_data table (FinancialData model confirmed in backend/database.py).
Postconditions:
The requested market data is downloaded in the specified format.
The platform logs the data download request.
Use Case 7: Quantitative Trader/Financial Analyst (Conduct Backtesting and Strategy Simulation)
Actor: Quantitative Trader/Financial Analyst
Goal: To backtest trading strategies using historical data and simulate future performance.
Description: The Quantitative Trader/Financial Analyst uses the platform's backtesting tools (developed in backtesting_service.py - not provided in snippets) to evaluate the effectiveness of trading strategies and simulate their performance under various market conditions. The development of the backtesting engine and the available simulation parameters might have been guided by LLM prompts suggesting common backtesting methodologies and relevant performance metrics.
Main User Story: As a Quantitative Trader/Financial Analyst, I want to backtest trading strategies and simulate their performance so that I can optimize my investment strategies (the implementation of this feature followed LLM-generated steps).
Related User Stories:
As a Quantitative Trader/Financial Analyst, I want to define custom trading rules and parameters for backtesting (the rule definition interface and logic might have been informed by LLM usability suggestions).
As a Quantitative Trader/Financial Analyst, I want to visualize the backtesting results with charts and performance metrics (the visualization aspects were likely guided by LLM best practices for financial data representation).
As a Quantitative Trader/Financial Analyst, I want to compare the performance of different trading strategies (the comparison tools might have been designed based on LLM suggestions for effective strategy evaluation).
Basic Flow (Main Success Scenario):
The Quantitative Trader/Financial Analyst logs into the platform.
The Quantitative Trader/Financial Analyst navigates to the backtesting module (UI design potentially LLM-informed).
The Quantitative Trader/Financial Analyst defines the trading strategy rules and parameters.
The Quantitative Trader/Financial Analyst selects the historical data range for backtesting.
The Platform runs the backtesting simulation (using backtesting_service.py - not provided in snippets, the core logic potentially guided by LLM suggestions for backtesting algorithms).
The Platform generates backtesting results, including performance metrics and visualizations.
The Quantitative Trader/Financial Analyst analyzes the results and compares different strategies.
Alternative Flows (Error Scenarios):
Invalid trading rule syntax.
Data retrieval errors.
Backtesting execution errors.
Simulation errors.
Visualization errors.
Preconditions:
The Quantitative Trader/Financial Analyst has an active account.
The platform has access to historical financial data (financial_data table, FinancialData model confirmed in backend/database.py).
The backtesting_service.py is functional (note: this file was not provided in the code snippets, indicating it's a planned or ongoing development).
Postconditions:
Backtesting results and performance metrics are displayed.
The Quantitative Trader/Financial Analyst can analyze and compare trading strategies.